(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{323:function(e,a,t){e.exports=t.p+"assets/img/kc01.1b9c33d1.png"},324:function(e,a,t){e.exports=t.p+"assets/img/kc01a.f58cb142.png"},325:function(e,a,t){e.exports=t.p+"assets/img/kc02.737875d0.png"},326:function(e,a,t){e.exports=t.p+"assets/img/kc03.94bfa263.png"},327:function(e,a,t){e.exports=t.p+"assets/img/kc04.791e26b0.png"},328:function(e,a,t){e.exports=t.p+"assets/img/kc05.1f920a9e.png"},329:function(e,a,t){e.exports=t.p+"assets/img/kc06.5f857702.png"},330:function(e,a,t){e.exports=t.p+"assets/img/kc07.687aa180.png"},331:function(e,a,t){e.exports=t.p+"assets/img/kc08.d2f51dda.png"},488:function(e,a,t){"use strict";t.r(a);var s=t(42),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"production-installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#production-installation"}},[e._v("#")]),e._v(" Production installation")]),e._v(" "),s("h2",{attrs:{id:"prerequisites"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),s("p",[e._v("To run Annette Platform the following software should be installed:")]),e._v(" "),s("ul",[s("li",[e._v("Apache Cassandra - NoSQL database providing high available storage to persist data.")]),e._v(" "),s("li",[e._v("Elastic Search - full text search engine providing indexing of data stored in Cassandra")]),e._v(" "),s("li",[e._v("Minio - AWS S3 compatible object storage to store files.")]),e._v(" "),s("li",[e._v("PostgreSQL - relation database for Keycloak (identity provider) and Camunda (business process management system)")]),e._v(" "),s("li",[e._v("Keycloak - identity management provider to authenticate users.")])]),e._v(" "),s("h3",{attrs:{id:"apache-cassandra"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#apache-cassandra"}},[e._v("#")]),e._v(" Apache Cassandra")]),e._v(" "),s("p",[e._v("Apache Cassandra provides distributed, high available NoSQL database. Annette microservices use Cassandra to persist\ntheir state. Annette Platform requires Apache Cassandra version 3.11 or higher. There is no requirement to create\nkeyspaces manually and init keyspace schemas. Annette Microservices will create keyspaces and tables automatically.")]),e._v(" "),s("p",[e._v("To download and install Apache Cassandra use the following "),s("a",{attrs:{href:"https://cassandra.apache.org/_/download.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),s("OutboundLink")],1),e._v(". For\nproduction installation it is recommended to enable password authentication (\nsee "),s("a",{attrs:{href:"https://cassandra.apache.org/doc/latest/cassandra/operating/security.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Security Guide"),s("OutboundLink")],1),e._v(" in Cassandra\ndocumentation).")]),e._v(" "),s("p",[e._v("As example of installation Cassandra cluster with 3 nodes (cas-01, cas-02, cas-03) on CentOS 7 you can use the following\nsteps:")]),e._v(" "),s("ol",[s("li",[e._v("Set firewall rules")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("firewall-cmd --permanent --add-port=7000/tcp\nfirewall-cmd --permanent --add-port=7001/tcp\nfirewall-cmd --permanent --add-port=7199/tcp\nfirewall-cmd --permanent --add-port=9042/tcp\nfirewall-cmd --permanent --add-port=9160/tcp\nfirewall-cmd --permanent --add-port=9142/tcp\nfirewall-cmd —reload\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("Add Cassandra repo keys "),s("code",[e._v("sudo rpm --import https://www.apache.org/dist/cassandra/KEYS")])]),e._v(" "),s("li",[e._v("Create Cassandra repo file "),s("code",[e._v("sudo vi /etc/yum.repos.d/cassandra.repo")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[cassandra]\nname=Apache Cassandra\nbaseurl=https://www.apache.org/dist/cassandra/redhat/311x/\ngpgcheck=1\nrepo_gpgcheck=1\ngpgkey=https://www.apache.org/dist/cassandra/KEYS\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[e._v("Install Cassandra "),s("code",[e._v("sudo yum install -y cassandra")])]),e._v(" "),s("li",[e._v("Change Cassandra configuration file "),s("code",[e._v("sudo vi /etc/cassandra/conf/cassandra.yaml")]),e._v(" to set cluster name and set\nCassandra seed nodes:")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("cluster_name: 'Annette Cluster'\n          - seeds: \"cas-01, cas-02, cas-03\"\nlisten_address: cas-01 # for cas-XX machine set cas-XX\nrpc_address: cas-01 # for cas-XX machine set cas-XX\n")])])]),s("ol",{attrs:{start:"6"}},[s("li",[e._v("Change Cassandra JVM options "),s("code",[e._v("vi /etc/cassandra/conf/jvm.options")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("-Xms12G\n-Xmx12G\n")])])]),s("ol",{attrs:{start:"7"}},[s("li",[e._v("Create Cassandra service file "),s("code",[e._v("sudo vi /etc/systemd/system/cassandra.service")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[Unit]\nDescription=Cassandra\nAfter=network.target\n\n[Service]\nPIDFile=/var/run/cassandra/cassandra.pid\nUser=cassandra\nGroup=cassandra\nExecStart=/usr/sbin/cassandra -f -p /var/run/cassandra/cassandra.pid\nStandardOutput=journal\nStandardError=journal\nLimitNOFILE=100000\nLimitMEMLOCK=infinity\nLimitNPROC=32768\nLimitAS=infinity\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\n")])])]),s("ol",{attrs:{start:"8"}},[s("li",[e._v("Start Cassandra daemon")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo systemctl daemon-reload\nsudo systemctl start cassandra\nsudo systemctl enable cassandra\n")])])]),s("ol",{attrs:{start:"9"}},[s("li",[e._v("Check Cassandra status "),s("code",[e._v("nodetool status")])])]),e._v(" "),s("p",[e._v("To enable Cassandra authentication perform the following steps:")]),e._v(" "),s("ol",[s("li",[e._v("Set Cassandra replication factor "),s("code",[e._v("cqlsh cas-01")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("ALTER KEYSPACE system_auth WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 3 };\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("Change Cassandra authenticator "),s("code",[e._v("sudo vi /etc/cassandra/conf/cassandra.yaml")]),e._v(" on all nodes")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("authenticator: PasswordAuthenticator\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[e._v("Restart Cassandra "),s("code",[e._v("sudo systemctl restart cassandra")]),e._v(" on all nodes")]),e._v(" "),s("li",[e._v("Set Cassandra password "),s("code",[e._v("cqlsh cas-01 -u cassandra -p cassandra")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("ALTER USER cassandra WITH PASSWORD '<secret password>’;\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[e._v("Check Cassandra authentication "),s("code",[e._v("cqlsh cas-01 -u cassandra -p <secret password>")])])]),e._v(" "),s("h3",{attrs:{id:"elastic-search"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elastic-search"}},[e._v("#")]),e._v(" Elastic Search")]),e._v(" "),s("p",[e._v("Elastic Search is used to index data stored in Cassandra. Annette Platform requires Elastic Search version 7.8 or\nhigher. For secured Elastic Search it is recommended to\nuse "),s("a",{attrs:{href:"https://opendistro.github.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Open Distro for Elastic search"),s("OutboundLink")],1),e._v(" (version 1.9.0 or higher).")]),e._v(" "),s("p",[e._v("To download and install Open Distro for Elastic Search use the\nfollowing "),s("a",{attrs:{href:"https://opendistro.github.io/for-elasticsearch-docs/docs/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),s("OutboundLink")],1),e._v(". To secure installation\ncheck "),s("a",{attrs:{href:"https://opendistro.github.io/for-elasticsearch-docs/docs/security/configuration/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Security configuration\n"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("As example of installation Open Distro for Elastic Search cluster with 3 nodes (es-01, es-02, es-03) on CentOS 7 you can\nuse the following steps:")]),e._v(" "),s("ol",[s("li",[e._v("Set firewall rules:")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("firewall-cmd --permanent --add-port=9200/tcp\nfirewall-cmd --permanent --add-port=9300/tcp\nfirewall-cmd —reload\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("Download Open Distro repo")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo curl https://d3g5vo6xdbdb9a.cloudfront.net/yum/opendistroforelasticsearch-artifacts.repo -o /etc/yum.repos.d/opendistroforelasticsearch-artifacts.repo\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[s("p",[e._v("Install Java 11 "),s("code",[e._v("sudo yum install java-11-openjdk-devel")])])]),e._v(" "),s("li",[s("p",[e._v("Install Open Distro")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo yum install wget unzip\nsudo yum list opendistroforelasticsearch --showduplicates\nsudo yum install opendistroforelasticsearch-1.9.0\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[e._v("Change Elastic Search config "),s("code",[e._v("sudo vi /etc/elasticsearch/elasticsearch.yml")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('cluster.name: AnnetteCluster7.8\nnode.name: \\${HOSTNAME}\nnetwork.host: [ _ens192_, _local_ ]\nbootstrap.memory_lock: true\ndiscovery.seed_hosts: ["es-01, es-02, es-03"]\ncluster.initial_master_nodes: ["es-01, es-02, es-03"]\n')])])]),s("ol",{attrs:{start:"6"}},[s("li",[e._v("Change ElasticSearch JVM options "),s("code",[e._v("sudo vi /etc/sysconfig/elasticsearch")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('ES_JAVA_OPTS="-Xms10g -Xmx10g"\nMAX_LOCKED_MEMORY=unlimited\n')])])]),s("ol",{attrs:{start:"7"}},[s("li",[e._v("Change ElasticSearch limits "),s("code",[e._v("sudo vi /etc/security/limits.conf")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("elasticsearch soft memlock unlimited\nelasticsearch hard memlock unlimited\n")])])]),s("ol",{attrs:{start:"8"}},[s("li",[e._v("Change "),s("code",[e._v("LimitMEMLOCK")]),e._v(" in service file"),s("code",[e._v("sudo vi /usr/lib/systemd/system/elasticsearch.service")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("LimitMEMLOCK=infinity\n")])])]),s("ol",{attrs:{start:"9"}},[s("li",[e._v("Restart ElasticSearch daemon")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo systemctl daemon-reload\nsudo systemctl start elasticsearch.service\nsudo systemctl enable elasticsearch.service\n")])])]),s("ol",{attrs:{start:"10"}},[s("li",[e._v("Check Elastic Search")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('curl -XGET https://es-01:9200 -u admin:admin --insecure\ncurl -XGET "https://es-01:9200/_cat/nodes?v" -u admin:admin --insecure\ncurl -XGET "https://es-01:9200/_cat/plugins?v" -u admin:admin --insecure\n')])])]),s("ol",{attrs:{start:"11"}},[s("li",[e._v("Create admin password")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("cd /usr/share/elasticsearch/plugins/opendistro_security/tools\nsudo sh hash.sh -p <secret password>\n$2y$12\\$C/543Qr4Y7Zy4Wsq5WvN9uw.WAbpvGghpiXvk9WexZgDfAGuG0OEC\n")])])]),s("ol",{attrs:{start:"12"}},[s("li",[s("p",[e._v("Change admin password using result of previous\ncommand "),s("code",[e._v("sudo vi /usr/share/elasticsearch/plugins/opendistro_security/securityconfig/internal_users.yml")])])]),e._v(" "),s("li",[s("p",[e._v("Rebuild passwords database for Open Distro")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sh securityadmin.sh -cd ../securityconfig/ -icl -nhnv -cacert /etc/elasticsearch/root-ca.pem -cert /etc/elasticsearch/kirk.pem -key /etc/elasticsearch/kirk-key.pem\n")])])]),s("h3",{attrs:{id:"minio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#minio"}},[e._v("#")]),e._v(" Minio")]),e._v(" "),s("p",[e._v("Minio is AWS S3 compatible object storage. Annette Platform uses Minio to store documents, images and other media\ncontent.")]),e._v(" "),s("p",[e._v("For production installation\nuse "),s("a",{attrs:{href:"https://docs.min.io/docs/distributed-minio-quickstart-guide.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Distributed MinIO Quickstart Guide"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"postgresql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#postgresql"}},[e._v("#")]),e._v(" PostgreSQL")]),e._v(" "),s("p",[e._v("PostgreSQL is open source relation database management system. Annette Platform uses PostgreSQL for the following\nservices:")]),e._v(" "),s("ul",[s("li",[e._v("Keycloak - open source Identity and Access Management System that provides user authentication using OpenID Connect")]),e._v(" "),s("li",[e._v("Camunda - open source workflow and decision automation platform")])]),e._v(" "),s("p",[e._v("Annette Platform requires PostgreSQL version 10 or higher.")]),e._v(" "),s("p",[e._v("For production installation use "),s("a",{attrs:{href:"https://www.postgresql.org/download/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PostgreSQL Download Page"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"keycloak"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak"}},[e._v("#")]),e._v(" Keycloak")]),e._v(" "),s("p",[e._v("Keycloak is open source Identity and Access Management System that provides user authentication using OpenID Connect.\nAnnette Platform requires Keycloak versions 12.0.1 - 16.1.1.")]),e._v(" "),s("p",[e._v("For production installation use "),s("a",{attrs:{href:"https://www.keycloak.org/guides#getting-started",target:"_blank",rel:"noopener noreferrer"}},[e._v("Getting Started Guide"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),s("h3",{attrs:{id:"postgresql-databases-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#postgresql-databases-configuration"}},[e._v("#")]),e._v(" PostgreSQL databases configuration")]),e._v(" "),s("p",[e._v("You have to set up two databases:")]),e._v(" "),s("ul",[s("li",[e._v("BPM Repository database")]),e._v(" "),s("li",[e._v("Camunda database")])]),e._v(" "),s("h4",{attrs:{id:"bpm-repository-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bpm-repository-database"}},[e._v("#")]),e._v(" BPM Repository database")]),e._v(" "),s("p",[e._v("To set up BPM Repository database perform the following steps:")]),e._v(" "),s("ol",[s("li",[e._v("Create user to access to database (replace <SECRET_PASSWORD> with password you want to use):")])]),e._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("USER")]),e._v(" bpm_repository"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ALTER")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("USER")]),e._v(" bpm_repository "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WITH")]),e._v(" ENCRYPTED password "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'<SECRET_PASSWORD>'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("Create BPM Repository database (replace PREFIX_ with prefix you want to use):")])]),e._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DATABASE")]),e._v(" PREFIX_bpm_repository "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WITH")]),e._v(" ENCODING "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'UTF8'")]),e._v(" OWNER "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" bpm_repository"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[e._v("Execute "),s("a",{attrs:{href:"https://github.com/annetteplatform/annette/blob/master/bpm/bpm-repository/sql/ddl.sql",target:"_blank",rel:"noopener noreferrer"}},[e._v("DDL script"),s("OutboundLink")],1),e._v(" to create\ntable and indexes in database")])]),e._v(" "),s("h4",{attrs:{id:"camunda-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#camunda-database"}},[e._v("#")]),e._v(" Camunda database")]),e._v(" "),s("p",[e._v("To set up Camunda database perform the following steps:")]),e._v(" "),s("ol",[s("li",[e._v("Create user to access to database (replace <SECRET_PASSWORD> with password you want to use):")])]),e._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("USER")]),e._v(" camunda"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ALTER")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("USER")]),e._v(" camunda "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WITH")]),e._v(" ENCRYPTED password "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'<SECRET_PASSWORD>'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("Create BPM Repository database (replace PREFIX_ with prefix you want to use):")])]),e._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DATABASE")]),e._v(" PREFIX_camunda "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WITH")]),e._v(" ENCODING "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'UTF8'")]),e._v(" OWNER "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" camunda"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("h3",{attrs:{id:"keycloak-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak-configuration"}},[e._v("#")]),e._v(" Keycloak configuration")]),e._v(" "),s("p",[e._v("To configure Keycloak perform the following steps:")]),e._v(" "),s("ol",[s("li",[e._v("Create realm "),s("code",[e._v("AnnetteDemo")])])]),e._v(" "),s("p",[s("img",{attrs:{src:t(323),alt:"Create realm",title:"Annette Demo"}})]),e._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[e._v("Clear fields "),s("code",[e._v("X-Frame-Options")]),e._v(" and "),s("code",[e._v("Content-Security-Policy")]),e._v(" in "),s("code",[e._v("Security Defenses")]),e._v(" tab")])]),e._v(" "),s("p",[s("img",{attrs:{src:t(324),alt:""}})]),e._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[e._v("Create client "),s("code",[e._v("annette-console")]),e._v(" with root URL to your application")])]),e._v(" "),s("p",[s("img",{attrs:{src:t(325),alt:""}}),e._v(" "),s("img",{attrs:{src:t(326),alt:""}})]),e._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[e._v("(Optional) Remove unnecessary client scopes "),s("code",[e._v("roles")]),e._v(" & "),s("code",[e._v("web-origins")]),e._v(" to reduce size of JWT token")])]),e._v(" "),s("p",[s("img",{attrs:{src:t(327),alt:""}})]),e._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[e._v("Create mapper for person_id. This mapper will include user attribute person_id to JWT token attribute person_id. User\nattribute person_id links Keycloak user account to person in Annette Platform.")])]),e._v(" "),s("p",[s("img",{attrs:{src:t(328),alt:""}})]),e._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[e._v("Create new user. For Annette Demo create user Kristina Fisher with person_id P0001. This user has admin rights.")])]),e._v(" "),s("p",[s("img",{attrs:{src:t(329),alt:""}})]),e._v(" "),s("ol",{attrs:{start:"7"}},[s("li",[e._v("Add user attribute person_id.")])]),e._v(" "),s("p",[s("img",{attrs:{src:t(330),alt:""}})]),e._v(" "),s("ol",{attrs:{start:"8"}},[s("li",[e._v("Set password for new user")])]),e._v(" "),s("p",[s("img",{attrs:{src:t(331),alt:""}})]),e._v(" "),s("h2",{attrs:{id:"kubernetes-deployment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes-deployment"}},[e._v("#")]),e._v(" Kubernetes deployment")]),e._v(" "),s("p",[e._v("Annette Platform is intended to run Kubernetes environment. It has been tested on OKD (open source version of Red Hat\nOpenShift, the well known Kubernetes distributive). To deploy in Kubernetes you have to prepare deployment scripts and\ndeploy them.")]),e._v(" "),s("h3",{attrs:{id:"prepare-deployment-scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prepare-deployment-scripts"}},[e._v("#")]),e._v(" Prepare deployment scripts")]),e._v(" "),s("p",[e._v("To prepare deployment scripts perform the following steps:")]),e._v(" "),s("ol",[s("li",[e._v("Prepare RBAC configuration (rbac.yml)")]),e._v(" "),s("li",[e._v("Prepare secrets settings (secret.sh)")]),e._v(" "),s("li",[e._v("Prepare config maps for Annette microservices and API gateway (config.yml)")]),e._v(" "),s("li",[e._v("Prepare backend and frontend deployment scripts (backend.yml & frontend.yml)")]),e._v(" "),s("li",[e._v("Prepare ingres (routes) settings (routes.yml)")]),e._v(" "),s("li",[e._v("Prepare ignition settings (demo-ignition.yml)")])]),e._v(" "),s("p",[e._v("Templates of these scripts you can find in folder "),s("code",[e._v("deploy/k8s")]),e._v(" of Annette Platform backend source code or in\nGitHub "),s("a",{attrs:{href:"https://github.com/annetteplatform/annette/tree/master/deploy/k8s",target:"_blank",rel:"noopener noreferrer"}},[e._v("deploy/k8s"),s("OutboundLink")],1)]),e._v(" "),s("h4",{attrs:{id:"rbac-configuration-rbac-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rbac-configuration-rbac-yml"}},[e._v("#")]),e._v(" RBAC configuration (rbac.yml)")]),e._v(" "),s("p",[e._v("RBAC configuration provide rights to get, watch and list pods in Kubernetes namespace. It is required to service\ndiscovery and to make Akka clusters.")]),e._v(" "),s("p",[e._v("To create RBAC configuration open template file "),s("code",[e._v("rbac.yml")]),e._v(" and replace $K8S_NAMESPACE$ with Kubernetes namespace you\nwant to deploy Annette Platform in.")]),e._v(" "),s("h4",{attrs:{id:"secrets-settings-secret-sh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#secrets-settings-secret-sh"}},[e._v("#")]),e._v(" Secrets settings (secret.sh)")]),e._v(" "),s("p",[e._v("Secret settings are used to secure store logins and passwords to databases and services Annette Platform requires.")]),e._v(" "),s("p",[e._v("To create secret settings script open template file "),s("code",[e._v("rbac.yml")]),e._v(" and replace "),s("code",[e._v("$...$")]),e._v(" with their respective values.")]),e._v(" "),s("p",[e._v("There are the following secret settings:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("elastic-secret")]),e._v(" provides access to indexing service (Elastic Search or OpenDistro for Elastic Search)")]),e._v(" "),s("li",[s("code",[e._v("cassandra-secret")]),e._v(" provides access to Apache Cassandra database")]),e._v(" "),s("li",[s("code",[e._v("play-secret")]),e._v(" provides secret key for signing session cookies and CSRF tokens and built in encryption utilities (\nsee "),s("a",{attrs:{href:"https://www.playframework.com/documentation/2.8.x/ApplicationSecret",target:"_blank",rel:"noopener noreferrer"}},[e._v("The Application Secret"),s("OutboundLink")],1),e._v(")")]),e._v(" "),s("li",[s("code",[e._v("minio-secret")]),e._v(" provides access to Minio service")]),e._v(" "),s("li",[s("code",[e._v("bpm-repository-secret")]),e._v(" provides login & password to access PostgreSQL database for BPM repository microservice")]),e._v(" "),s("li",[s("code",[e._v("camunda-client-secret")]),e._v(" provides login & password to access Camunda BPM engine. These credentials should be set after\ndeploy Camunda")]),e._v(" "),s("li",[s("code",[e._v("camunda-secret")]),e._v(" provides login & password to access PostgreSQL database for Camunda BPM engine")])]),e._v(" "),s("p",[e._v("Replace "),s("code",[e._v("oc")]),e._v(" with "),s("code",[e._v("kubectl")]),e._v(" if you don't use OKD/OpenShift.")]),e._v(" "),s("h4",{attrs:{id:"config-maps-for-annette-microservices-and-api-gateway-config-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#config-maps-for-annette-microservices-and-api-gateway-config-yml"}},[e._v("#")]),e._v(" Config maps for Annette microservices and API gateway (config.yml)")]),e._v(" "),s("p",[e._v("Config maps are used to configure Annette Platform microservices and API gateways.")]),e._v(" "),s("p",[e._v("To create config maps open template file "),s("code",[e._v("config.yml")]),e._v(" and set up environment variables with their respective values as\ndescribed below:")]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("elastic-config")]),e._v(" provides configuration to access Elastic Search:")]),e._v(" "),s("ul",[s("li",[e._v("INDEXING_URL - contains list of Elastic Search servers. For\nexample, "),s("code",[e._v("https://es-01.domain.com,es-02.domain.com,es-03.domain.com")]),e._v(". Required.")]),e._v(" "),s("li",[e._v("INDEX_PREFIX - contains prefix for indexes created in Elastic Search. Don't forget to add a dash at the end. For\nexample: "),s("code",[e._v("annette-")]),e._v(". Optional.")]),e._v(" "),s("li",[e._v("INDEXING_ALLOW_INSECURE - set true if you use sel signed certificate on your Elastic Search servers. Optional.")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("cassandra-config")]),e._v(" provides configuration to access Apache Cassandra:")]),e._v(" "),s("ul",[s("li",[e._v("CASSANDRA_URL - contains list of Cassandra servers. For\nexample, "),s("code",[e._v("cas-01.domain.com,cas-02.domain.com,cas-03.domain.com")]),e._v(". Required.")]),e._v(" "),s("li",[e._v("KEYSPACE_PREFIX - contains prefix for keyspaces created in Cassandra. Don't forget to add an underscore at the\nend. For example: "),s("code",[e._v("annette_")]),e._v(". Optional.")]),e._v(" "),s("li",[e._v("CASSANDRA_REPLICATION_FACTOR - replication factor used to create keyspaces. Optional.")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("cms-minio-config")]),e._v(" provides configuration to access Minio object storage:")]),e._v(" "),s("ul",[s("li",[e._v("MINIO_URL - contains list of Cassandra servers. For example, "),s("code",[e._v("http://minio-01.domain.com:9000")]),e._v(". Required.")]),e._v(" "),s("li",[e._v("CMS_STORAGE_BUCKET_PREFIX - contains prefix for buckets created in Minio. Don't forget to add a dash at the end.\nFor example: "),s("code",[e._v("annette-")]),e._v(". Optional.")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("bpm-repository-config")]),e._v(" provides configuration to access PostgreSQL:")]),e._v(" "),s("ul",[s("li",[e._v("POSTGRES_SERVER - contains PostgreSQL server FDQN. For example, "),s("code",[e._v("pg-01.domain.com")]),e._v(". Required.")]),e._v(" "),s("li",[e._v("POSTGRES_PREFIX - contains prefix for database. Don't forget to add an underscore at the end. For\nexample: "),s("code",[e._v("annette_")]),e._v(". Optional.")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("camunda-client-config")]),e._v(" provides configuration to access Camunda BPM engine:")]),e._v(" "),s("ul",[s("li",[e._v("CAMUNDA_URL - contains camunda URL. For example, "),s("code",[e._v('http://camunda:8080/engine-rest/engine/default"')]),e._v(". Required,")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("camunda-config")]),e._v(" provides configuration for Camunda BPM engine:")]),e._v(" "),s("ul",[s("li",[e._v("DB_DRIVER - contains database driver class. For example, "),s("code",[e._v("org.postgresql.Driver")]),e._v(". Required.")]),e._v(" "),s("li",[e._v("DB_URL - contains PostgreSQL URL for Camunda database. For\nexample, "),s("code",[e._v("jdbc:postgresql://pg-01.domain.com:5432/annette_camunda")]),e._v(". Required.")]),e._v(" "),s("li",[e._v("WAIT_FOR - contains PostgreSQL server name and port. For example, "),s("code",[e._v("pg-01.domain.com:5432")]),e._v(". Required.")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("multi-instance-config")]),e._v(" provides configuration for multi instance (clustered) microservice:")]),e._v(" "),s("ul",[s("li",[e._v("JAVA_OPTS - provide Java options that contain path to logback and application configuration files. Required. For\nexample:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("-Dlogback.configurationFile=/opt/docker/conf/logback.k8s.xml-Dconfig.file=/opt/docker/conf/application.k8s.conf -Dlagom.circuit-breaker.default.enabled=off\n")])])])]),e._v(" "),s("li",[e._v("REQUIRED_CONTACT_POINT_NR - number of microservice instances required to build cluster. Required.")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("single-instance-config")]),e._v(" provides configuration for single instance microservice:")]),e._v(" "),s("ul",[s("li",[e._v("JAVA_OPTS- provide Java options that contain path to logback and application configuration files. Required. For\nexample:"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("-Dlogback.configurationFile=/opt/docker/conf/logback.k8s.xml -Dconfig.file=/opt/docker/conf/application.k8s.conf -Dlagom.circuit-breaker.default.enabled=off -Dlagom.cluster.bootstrap.enabled=false -Dakka.cluster.min-nr-of-members=1 -Dlagom.cluster.join-self=on\n")])])])]),e._v(" "),s("li",[e._v("REQUIRED_CONTACT_POINT_NR - number of microservice instances required to build cluster. Required.")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("keycloak-config")]),e._v(" provides Keycloak configuration for API gateway:")]),e._v(" "),s("ul",[s("li",[e._v("KEYCLOAK_REALM - name of Keycloak realm. For example: "),s("code",[e._v("AnnetteDemo")]),e._v(".")]),e._v(" "),s("li",[e._v("KEYCLOAK_URL - Keycloak URL. For example: "),s("code",[e._v("https://keycloak.domain.com/auth")]),e._v(".")]),e._v(" "),s("li",[e._v("KEYCLOAK_SSL_REQUIRED - indicator if SSL required for Keycloak. For example: "),s("code",[e._v("external")])]),e._v(" "),s("li",[e._v("KEYCLOAK_CLIENT - Keycloak client name. For example: "),s("code",[e._v("annette-console")])]),e._v(" "),s("li",[e._v("KEYCLOAK_PUBLIC_CLIENT indicator if client is public. For example: "),s("code",[e._v("true")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("persons-k8s-config")]),e._v(" provides example of configuration file for persons microservice that contains specific\nattributes.")]),e._v(" "),s("ul",[s("li",[e._v("application.k8s.conf - configuration file content.")])])])]),e._v(" "),s("h4",{attrs:{id:"backend-and-frontend-deployment-scripts-backend-yml-frontend-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#backend-and-frontend-deployment-scripts-backend-yml-frontend-yml"}},[e._v("#")]),e._v(" Backend and frontend deployment scripts (backend.yml & frontend.yml)")]),e._v(" "),s("p",[e._v("Backend and frontend deployment scripts are used to deploy Annette Platform frontend, microservices and API gateways.")]),e._v(" "),s("p",[e._v("Usually you don't need to change files "),s("code",[e._v("backend.yml")]),e._v(" & "),s("code",[e._v("frontend.yml")]),e._v(". But sometimes you can change image version or\nmetadata.")]),e._v(" "),s("p",[s("code",[e._v("frontend.yml")]),e._v(" contains Kubernetes Deployment and Service for deployment Annette Platform frontend.")]),e._v(" "),s("p",[s("code",[e._v("backend.yml")]),e._v(" contains Kubernetes Deployments and Services for deployment Annette Platform API gateway and\nmicroservices:")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("api-gateway - Annette Platform API gateway that is used authenticate and authorize incoming request and orchestrate\nmicroservices. It requires the following config maps and secrets:")]),e._v(" "),s("ul",[s("li",[e._v("multi-instance-config")]),e._v(" "),s("li",[e._v("keycloak-config")]),e._v(" "),s("li",[e._v("play-secret")]),e._v(" "),s("li",[e._v("cms-minio-config")]),e._v(" "),s("li",[e._v("minio-secret")]),e._v(" "),s("li",[e._v("camunda-client-config")]),e._v(" "),s("li",[e._v("camunda-client-secret")])])]),e._v(" "),s("li",[s("p",[e._v("application - application microservice that manage Annette applications, languages and translations. It requires the\nfollowing config maps and secrets:")]),e._v(" "),s("ul",[s("li",[e._v("multi-instance-config")]),e._v(" "),s("li",[e._v("elastic-config")]),e._v(" "),s("li",[e._v("elastic-secret")]),e._v(" "),s("li",[e._v("cassandra-config")]),e._v(" "),s("li",[e._v("cassandra-secret")]),e._v(" "),s("li",[e._v("play-secret")])])]),e._v(" "),s("li",[s("p",[e._v("authorization - authorization microservice that control authorization roles and permission assignments to Annette\nprincipals. It requires the following config maps and secrets:")]),e._v(" "),s("ul",[s("li",[e._v("multi-instance-config")]),e._v(" "),s("li",[e._v("elastic-config")]),e._v(" "),s("li",[e._v("elastic-secret")]),e._v(" "),s("li",[e._v("cassandra-config")]),e._v(" "),s("li",[e._v("cassandra-secret")]),e._v(" "),s("li",[e._v("play-secret")])])]),e._v(" "),s("li",[s("p",[e._v("subscriptions - subscriptions microservice that allow users to subscribe to CMS blogs/spaces, etc. It requires the\nfollowing config maps and secrets:")]),e._v(" "),s("ul",[s("li",[e._v("multi-instance-config")]),e._v(" "),s("li",[e._v("elastic-config")]),e._v(" "),s("li",[e._v("elastic-secret")]),e._v(" "),s("li",[e._v("cassandra-config")]),e._v(" "),s("li",[e._v("cassandra-secret")]),e._v(" "),s("li",[e._v("play-secret")])])]),e._v(" "),s("li",[s("p",[e._v("principal-groups - principal-groups microservice that stores groups of Annette Principals. It requires the following\nconfig maps and secrets:")]),e._v(" "),s("ul",[s("li",[e._v("multi-instance-config")]),e._v(" "),s("li",[e._v("elastic-config")]),e._v(" "),s("li",[e._v("elastic-secret")]),e._v(" "),s("li",[e._v("cassandra-config")]),e._v(" "),s("li",[e._v("cassandra-secret")]),e._v(" "),s("li",[e._v("play-secret")])])]),e._v(" "),s("li",[s("p",[e._v("persons - persons microservice that stores person's master data and their attributes. To configure person attributes\nspecific application configuration file mounted using volumeMounts. It requires the following config maps and secrets:")]),e._v(" "),s("ul",[s("li",[e._v("multi-instance-config")]),e._v(" "),s("li",[e._v("elastic-config")]),e._v(" "),s("li",[e._v("elastic-secret")]),e._v(" "),s("li",[e._v("cassandra-config")]),e._v(" "),s("li",[e._v("cassandra-secret")]),e._v(" "),s("li",[e._v("play-secret")]),e._v(" "),s("li",[e._v("persons-k8s-config")])])]),e._v(" "),s("li",[s("p",[e._v("org-structure - org-structure microservice that stores and manage organizational structures and roles. To configure\norganizational unit and position attributes specific application configuration file mounted using volumeMounts. It\nrequires the following config maps and secrets:")]),e._v(" "),s("ul",[s("li",[e._v("multi-instance-config")]),e._v(" "),s("li",[e._v("elastic-config")]),e._v(" "),s("li",[e._v("elastic-secret")]),e._v(" "),s("li",[e._v("cassandra-config")]),e._v(" "),s("li",[e._v("cassandra-secret")]),e._v(" "),s("li",[e._v("play-secret")]),e._v(" "),s("li",[e._v("org-structure-k8s-config")])])]),e._v(" "),s("li",[s("p",[e._v("cms - CMS microservice that manage CMS content: blogs, posts, spaces, pages, media content and documents. It requires\nthe following config maps and secrets:")]),e._v(" "),s("ul",[s("li",[e._v("multi-instance-config")]),e._v(" "),s("li",[e._v("elastic-config")]),e._v(" "),s("li",[e._v("elastic-secret")]),e._v(" "),s("li",[e._v("cassandra-config")]),e._v(" "),s("li",[e._v("cassandra-secret")]),e._v(" "),s("li",[e._v("play-secret")]),e._v(" "),s("li",[e._v("cms-minio-config")]),e._v(" "),s("li",[e._v("minio-secret")])])]),e._v(" "),s("li",[s("p",[e._v("bpm-repository - BPM repository microservice that manage BPM models, data schemas and business processes. It requires\nthe following config maps and secrets:")]),e._v(" "),s("ul",[s("li",[e._v("single-instance-config")]),e._v(" "),s("li",[e._v("bpm-repository-config")]),e._v(" "),s("li",[e._v("bpm-repository-secret")]),e._v(" "),s("li",[e._v("play-secret")])])]),e._v(" "),s("li",[s("p",[e._v("camunda - Camunda BPM engine microservice. It requires the following config maps and secrets:")]),e._v(" "),s("ul",[s("li",[e._v("camunda-config")]),e._v(" "),s("li",[e._v("camunda-secret")])])])]),e._v(" "),s("h4",{attrs:{id:"routes-settings-routes-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#routes-settings-routes-yml"}},[e._v("#")]),e._v(" Routes settings (routes.yml)")]),e._v(" "),s("p",[e._v("An OKD routes exposes a service at a host name, such as annette-console.domain.com, so that external clients can reach\nit by name.")]),e._v(" "),s("p",[e._v("To create routes open template file "),s("code",[e._v("routes.yml")]),e._v(" and set up host names with their respective values as described below:")]),e._v(" "),s("ul",[s("li",[e._v("annette-frontend links to Annette Platform frontend service (annette-frontend)")]),e._v(" "),s("li",[e._v("annette-backend links to Annette Platform API gateway service (api-gateway)")]),e._v(" "),s("li",[e._v("annette-camunda links to Camunda BPM engine service (camunda)")])]),e._v(" "),s("h4",{attrs:{id:"ignition-settings-demo-ignition-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ignition-settings-demo-ignition-yml"}},[e._v("#")]),e._v(" Ignition settings (demo-ignition.yml)")]),e._v(" "),s("p",[e._v("Template file "),s("code",[e._v("demo-ignition.yml")]),e._v(" contains Kubernetes Job script that runs Annette Demo Ignition. Annette Demo Ignition\ninitializes the following data:")]),e._v(" "),s("ul",[s("li",[e._v("authorization role and assignments")]),e._v(" "),s("li",[e._v("person's master data and their attributes")]),e._v(" "),s("li",[e._v("organizational structure")])]),e._v(" "),s("p",[e._v("To prepare initialization Annette Platform according your requirements you need to perform the following steps:")]),e._v(" "),s("ol",[s("li",[e._v("Fork subproject "),s("code",[e._v("ignition/ignition-demo")])]),e._v(" "),s("li",[e._v("Change ignition configuration in "),s("code",[e._v("conf")]),e._v(" folder according your requirements")]),e._v(" "),s("li",[e._v("Build docker image using command "),s("code",[e._v("sbt demo-ignition/docker:publishLocal")])]),e._v(" "),s("li",[e._v("Push image to your image repository")]),e._v(" "),s("li",[e._v("Change "),s("code",[e._v("demo-ignition.yml")]),e._v(" to use your image")])]),e._v(" "),s("h3",{attrs:{id:"deployment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deployment"}},[e._v("#")]),e._v(" Deployment")]),e._v(" "),s("p",[e._v("After deployment scripts preparation you can deploy Annette Platform to OKD/OpenShift by performing the following steps:")]),e._v(" "),s("ol",[s("li",[e._v("Create Kubernetes namespace (project)")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("oc new-project "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("project_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("Set up RBAC")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("oc apply -f deploy/k8s/rbac.yml\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[e._v("Set up secrets settings")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("deploy/k8s/secret.sh\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[e._v("Set up config maps for Annette microservices and API gateway")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("oc apply -f deploy/k8s/config.yml\n")])])]),s("ol",{attrs:{start:"6"}},[s("li",[e._v("Deploy backend and frontend")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("oc apply -f deploy/k8s/backend.yml\noc apply -f deploy/k8s/frontend.yml\n")])])]),s("ol",{attrs:{start:"7"}},[s("li",[e._v("Set up routes")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("oc apply -f deploy/k8s/routes.yml\n")])])]),s("ol",{attrs:{start:"8"}},[s("li",[s("p",[e._v("Setup Camunda login/password. You need open Camunda URL you defined in route "),s("code",[e._v("annette-camunda")]),e._v(" and enter Camunda\ncredentials you defined in secret "),s("code",[e._v("camunda-client-secret")]),e._v(" in form appeared.")])]),e._v(" "),s("li",[s("p",[e._v("Perform initialization of Annette Platform by running ignition job")])])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("oc apply -f deploy/k8s/demo-ignition.yml\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);